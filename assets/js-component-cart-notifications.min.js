(()=>{class t extends HTMLElement{constructor(){super(),"liquidAjaxCart"in window&&this.init(),document.body.addEventListener("liquidAjaxCartInit",this.init.bind(this))}init(){const t=this.querySelector("[data-cart-notifications-items]");if(!t)return;const e=this.querySelector("[data-cart-notifications-close-button]");e&&e.addEventListener("click",(()=>{this.classList.remove("js-show")})),window.liquidAjaxCart.subscribeToCartAjaxRequests(((e,i)=>{"add"===e.requestType&&i((e=>{if(e.responseData?.ok){let i=!1;t.innerHTML="";let s=[];"items"in e.responseData.body?s=e.responseData.body.items:"key"in e.responseData.body&&s.push(e.responseData.body);for(let e in s){const n=window.liquidAjaxCart.getCartState().cart.items.findIndex((t=>{let i=t.properties;null===i&&(i={});let n=s[e].properties;return null===n&&(n={}),t.variant_id===s[e].variant_id&&JSON.stringify(i)===JSON.stringify(n)&&t.quantity===s[e].quantity})),a=this.querySelector(`[data-index="${n}"]`);if(!a)continue;a.removeAttribute("data-index");const o=document.createElement("DIV");o.append(a),t.append(o),i=!0}i&&this.show()}}))}))}show(){clearTimeout(this.closeTimeout),this.classList.remove("js-show"),setTimeout((()=>{this.classList.add("js-show")}),50),this.closeTimeout=setTimeout((()=>{this.classList.remove("js-show")}),5e3)}}customElements.define("cart-notifications",t)})(); 